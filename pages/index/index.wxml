<!--index.wxml-->
<navigation-bar title="ä»“åº“ç®¡ç†" back="{{false}}" color="white" background="#212121"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- æ¬¢è¿åŒºåŸŸ -->
    <view class="welcome-section">
      <view class="welcome-text">
        <text class="greeting">æ¬¢è¿å›æ¥</text>
        <text class="username">{{userName || 'ç®¡ç†å‘˜'}}</text>
      </view>
      <view class="date-info">
        <text class="date">{{currentDate}}</text>
      </view>
    </view>

    <!-- ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ -->
    <view class="stats-section">
      <view class="stats-grid">
        <view class="stat-card">
          <view class="stat-icon">ğŸ“Š</view>
          <view class="stat-content">
            <text class="stat-number">{{monthInValue}}</text>
            <text class="stat-label">æœ¬æœˆå…¥åº“å•†å“é‡‘é¢</text>
          </view>
        </view>
        <view class="stat-card warning">
          <view class="stat-icon">âš ï¸</view>
          <view class="stat-content">
            <text class="stat-number">{{lowStockCount}}</text>
            <text class="stat-label">åº“å­˜é¢„è­¦</text>
          </view>
        </view>
      </view>
    </view>

    <!-- å¿«æ·æ“ä½œåŒºåŸŸ -->
    <view class="quick-actions">
      <text class="section-title">å¿«æ·æ“ä½œ</text>
      <view class="actions-grid center-actions">
        <view class="action-item" bindtap="inStock">
          <view class="action-icon">ğŸ“¥</view>
          <text class="action-text">å…¥åº“</text>
        </view>
        <view class="action-item" bindtap="outStock">
          <view class="action-icon">ğŸ“¤</view>
          <text class="action-text">å‡ºåº“</text>
        </view>
        <view class="action-item" bindtap="searchProduct">
          <view class="action-icon">ğŸ”</view>
          <text class="action-text">æœç´¢å•†å“</text>
        </view>
        <view class="action-item" bindtap="showCategory">
          <view class="action-icon">ğŸ“¦</view>
          <text class="action-text">å•†å“åˆ†ç±»</text>
        </view>
      </view>
    </view>

    <!-- åº“å­˜æ¦‚è§ˆåŒºåŸŸ -->
    <view class="inventory-overview">
      <view class="section-header">
        <text class="section-title">åº“å­˜æ¦‚è§ˆ</text>
        <text class="view-all" bindtap="viewAllProducts">æŸ¥çœ‹å…¨éƒ¨</text>
      </view>
      <view class="inventory-list">
        <view class="inventory-item" wx:for="{{recentProducts}}" wx:key="id" bindtap="viewProduct" data-id="{{item.id}}">
          <view class="product-info">
            <text class="product-name">{{item.name}}</text>
            <text class="product-category">{{item.category}}</text>
          </view>
          <view class="stock-info">
            <text class="stock-count {{item.stock < item.minStock ? 'low-stock' : ''}}">{{item.stock}}</text>
            <text class="stock-unit">{{item.unit}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æœ€è¿‘æ´»åŠ¨åŒºåŸŸ -->
    <view class="recent-activities">
      <text class="section-title">æœ€è¿‘æ´»åŠ¨</text>
      <view class="activity-list">
        <view class="activity-item" wx:for="{{recentActivities}}" wx:key="id">
          <view class="activity-icon">{{item.icon}}</view>
          <view class="activity-content">
            <text class="activity-text">{{item.text}}</text>
            <text class="activity-time">{{item.time}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</scroll-view>
